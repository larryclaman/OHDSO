trigger: none

pool:
  vmImage: 'ubuntu-latest'

variables:
  yelpimage: 'ghcr.io/larryclaman/dockerdetectsecrets:latest'
  pluginsdir: yelp-plugins
  pythonappdir: /home/vsts/.local/bin


steps:
- script: |
    pip install wheel
    pip install detect-secrets
    $(pythonappdir)/detect-secrets scan --custom-plugins yelp-plugins/
    #$(pythonappdir)/detect-secrets scan --custom-plugins https://raw.githubusercontent.com/Yelp/detect-secrets/pre-v1-launch/detect_secrets/plugins/azure_storage_key.py > .secrets.baseline
    #$(pythonappdir)/detect-secrets audit .secrets.baseline
  displayName: 'detect-secrets credentials scan'